{"version":3,"file":"atomico-base-element.umd.js","sources":["../src/index.js"],"sourcesContent":["/**\r\n * Applies JSON.parse to extract the real value of an attribute from a string.\r\n * @param {string} value\r\n * @returns {(boolean|string|number|Object|Array)}\r\n **/\r\nfunction parse(value) {\r\n\treturn JSON.parse(value);\r\n}\r\n\r\nexport default class Element extends HTMLElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t/**@type {Object<string,any>} */\r\n\t\tthis.props = {};\r\n\t\t/**@type {Promise} */\r\n\t\tthis.mounted = new Promise(resolve => (this.mount = resolve));\r\n\t\t/**@type {Promise} */\r\n\t\tthis.unmounted = new Promise(resolve => (this.unmount = resolve));\r\n\t}\r\n\tconnectedCallback() {\r\n\t\tthis.mount();\r\n\t}\r\n\tdisconnectedCallback() {\r\n\t\tthis.unmount();\r\n\t}\r\n\tattributeChangedCallback(name, oldValue, value) {\r\n\t\tif (oldValue == value) return;\r\n\t\tthis.setProperty(name, value);\r\n\t}\r\n\tstatic get observedAttributes() {\r\n\t\tlet observables = this.observables || {},\r\n\t\t\tattributes = [],\r\n\t\t\t/**\r\n\t\t\t * @param {string} - add the setter and getter to the constructor prototype\r\n\t\t\t */\r\n\t\t\tproxy = name => {\r\n\t\t\t\tObject.defineProperty(this.prototype, name, {\r\n\t\t\t\t\tset(value) {\r\n\t\t\t\t\t\tthis.setProperty(name, value);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget() {\r\n\t\t\t\t\t\treturn this.props[name];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\tfor (let key in observables) {\r\n\t\t\tlet attr = key.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n\t\t\tattributes.push(attr);\r\n\t\t\tif (!(name in this.prototype)) proxy(key);\r\n\t\t}\r\n\t\treturn attributes;\r\n\t}\r\n\t/**\r\n\t * validate to `value`, and then deliver it to the` update` method.\r\n\t * @param {name} name\r\n\t * @param {*} value\r\n\t */\r\n\tsetProperty(name, value) {\r\n\t\tname = name.replace(/-(\\w)/g, (all, letter) => letter.toUpperCase());\r\n\t\tlet { observables } = this.constructor,\r\n\t\t\terror,\r\n\t\t\ttype = observables[name];\r\n\t\ttry {\r\n\t\t\tif (typeof value == \"string\") {\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase Boolean:\r\n\t\t\t\t\t\tvalue = parse(value || \"true\") == true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase Number:\r\n\t\t\t\t\t\tvalue = Number(value);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase Object:\r\n\t\t\t\t\tcase Array:\r\n\t\t\t\t\t\tvalue = parse(value);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\terror = true;\r\n\t\t}\r\n\t\tif (!error && {}.toString.call(value) == `[object ${type.name}]`) {\r\n\t\t\tthis.update({ [name]: value });\r\n\t\t} else {\r\n\t\t\tthrow `the attribute [${name}] must be of the type [${type.name}]`;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * @param {Object<string,any>} props\r\n\t */\r\n\tupdate(props) {}\r\n}\r\n"],"names":[],"mappings":"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"}